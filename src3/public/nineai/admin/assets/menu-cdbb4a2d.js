
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{_ as te}from"./index-ebfdc92e.js";import{Y as P,d as re,r as g,B as j,C as se,x as de,o as m,c as me,e as l,f as o,a as x,k as t,t as _,I as p,J as c,b as O,E as z,h as d,q as W}from"./index-4432f6f4.js";import{_ as ie}from"./index.vue_vue_type_script_setup_true_lang-5ea5bda8.js";const h={quertMenu:I=>P.get("menu/query",{params:I}),visibleMenu:I=>P.post("menu/visible",I),setMenu:I=>P.post("menu/setMenu",I),delMenu:I=>P.post("menu/delete",I),updateIcon:I=>P.post("menu/updateIcon",I)},pe={class:"flex justify-between"},ce=x("b",null,"客户端动态菜单设置",-1),ve={class:"flex items-center"},fe={class:"flex items-center"},Ie={class:"dialog-footer"},ye={class:"dialog-footer"},ge=re({__name:"menu",setup(I){const r=g({useIconType:1,imgIcon:"",activeImgIcon:"",menuIcon:"",menuActiveIcon:"",menuTipText:"",order:0}),L=g(),S=g(1),A=g(),w=g(!1),b=g(0),N=g(!1),a=g({menuTipText:"",menuIframeUrl:"",isJump:!1,isShow:!0,useIconType:1,menuIcon:"",menuActiveIcon:"",imgIcon:"",activeImgIcon:"",menuPath:"",order:1e3,isNeedAuth:!1,isSystem:!0}),Y=j(()=>({menuTipText:[{required:!0,trigger:"blur",message:"请填写菜单名称"}],menuIframeUrl:[{required:!0,trigger:"blur",message:"请填写三方网页地址"}],isJump:[{required:!0,trigger:"blur",message:"请确认是否跳转"}],useIconType:[{required:!0,trigger:"blur",message:"请确认使用图标类型"}],isShow:[{required:!0,trigger:"blur",message:"请确认是否打开菜单"}],menuIcon:[{required:a.value.useIconType===1,trigger:"blur",message:"请填写ICON图标"}],menuActiveIcon:[{required:a.value.useIconType===1,trigger:"blur",message:"请填写ICON图标"}],imgIcon:[{required:a.value.useIconType===2,trigger:"blur",message:"请填写图片地址图标"}],activeImgIcon:[{required:a.value.useIconType===2,trigger:"blur",message:"请填写图片地址图标"}],order:[{required:!0,trigger:"blur",message:"请填写排序ID"}],menuPath:[{required:!0,trigger:"blur",message:"请填写菜单路径"}],isSystem:[{required:!0,trigger:"blur",message:"请确认是否是系统内地址"}],isNeedAuth:[{required:!0,trigger:"blur",message:"请确认是否需要权限"}]}));se(S,n=>{k()});const X=j(()=>b.value>0?"编辑菜单":"添加菜单"),Z=j(()=>b.value>0?"确认修改":"确认添加"),G=g([]);async function k(){const n=await h.quertMenu({menuPlatform:S.value});G.value=n.data}function H(n){n==null||n.resetFields(),b.value=0}async function E(n){const{id:u}=n;await h.visibleMenu({id:u}),z.success("操作成功！"),k()}async function ee(n){await h.delMenu({id:n.id}),z.success("操作成功！"),k()}async function le(){var n;(n=A.value)==null||n.resetFields(),b.value=0,w.value=!0}async function ue(n){n==null||n.validate(async u=>{if(!u)return;const y=Object.assign(a.value,{id:b},{menuPlatform:S.value});await h.setMenu(y),z.success("操作成功！"),n.resetFields(),w.value=!1,k()})}function oe(n){const{id:u,menuTipText:y,menuIframeUrl:q,isJump:C,isShow:V,menuIcon:M,menuPath:U,order:v,isNeedAuth:f,menuActiveIcon:T,useIconType:B,imgIcon:F,activeImgIcon:D}=n;b.value=u,a.value={menuActiveIcon:T,menuTipText:y,menuIframeUrl:q,isJump:C,isShow:V,menuIcon:M,menuPath:U,order:v,isNeedAuth:f,isSystem:!U,useIconType:B,imgIcon:F,activeImgIcon:D},w.value=!0}async function ae(n){const{id:u,menuIcon:y,menuTipText:q,order:C,menuActiveIcon:V,useIconType:M,imgIcon:U,activeImgIcon:v}=n;r.value={menuIcon:y,menuActiveIcon:V,menuTipText:q,order:C,useIconType:M,imgIcon:U,activeImgIcon:v},b.value=u,N.value=!0}async function ne(n){n==null||n.validate(async u=>{if(!u)return;const y={id:b.value,...r.value};await h.updateIcon(y),z.success("操作成功！"),k(),N.value=!1})}return de(()=>{k()}),(n,u)=>{const y=d("el-alert"),q=te,C=d("el-radio-button"),V=d("el-radio-group"),M=d("Plus"),U=d("el-icon"),v=d("el-button"),f=d("el-table-column"),T=d("el-tag"),B=d("el-popconfirm"),F=d("el-table"),D=d("el-card"),$=d("el-switch"),s=d("el-form-item"),i=d("el-input"),J=d("el-radio"),K=d("el-form"),Q=d("el-dialog");return m(),me("div",null,[l(q,null,{default:o(()=>[l(y,{closable:!1,"show-icon":"",title:"动态菜单配置说明",description:"请至少配置一个、如果不配置默认设置对话页面、排序ID越小越靠前、PC和移动端是两套独立的设置、图标选择请在此处： https://icon-sets.iconify.design/ 找到或搜索到喜欢的图标之后可以复制下方的图标编号 例如material-symbols:chat-outline、更加详细文档参考官方演示站公告文档地址！",type:"success"})]),_:1}),l(D,{style:{margin:"20px"}},{header:o(()=>[x("div",pe,[ce,x("div",ve,[l(V,{modelValue:S.value,"onUpdate:modelValue":u[0]||(u[0]=e=>S.value=e),size:"large"},{default:o(()=>[l(C,{label:1},{default:o(()=>[t(" PC端 ")]),_:1}),l(C,{label:0},{default:o(()=>[t(" 移动端 ")]),_:1})]),_:1},8,["modelValue"]),l(v,{size:"large",class:"ml-5",onClick:le},{default:o(()=>[t(" 添加菜单 "),l(U,{class:"ml-3"},{default:o(()=>[l(M)]),_:1})]),_:1})])])]),default:o(()=>[l(F,{data:G.value,style:{width:"100%"}},{default:o(()=>[l(f,{prop:"menuTipText",label:"菜单文本"}),l(f,{prop:"menuType",label:"菜单类型"},{default:o(e=>[l(T,{type:e.row.menuType?"success":"danger"},{default:o(()=>[t(_(e.row.menuType===0?"系统预设":"自定义菜单"),1)]),_:2},1032,["type"])]),_:1}),l(f,{prop:"isJump",label:"是否打开新窗口"},{default:o(e=>[l(T,{type:e.row.isJump?"success":"danger"},{default:o(()=>[t(_(e.row.isJump?"是":"否"),1)]),_:2},1032,["type"])]),_:1}),l(f,{prop:"isShow",label:"是否显示菜单"},{default:o(e=>[l(T,{type:e.row.isShow?"success":"danger"},{default:o(()=>[t(_(e.row.isShow?"是":"否"),1)]),_:2},1032,["type"])]),_:1}),l(f,{prop:"isNeedAuth",label:"是否需要登录访问"},{default:o(e=>[l(T,{type:e.row.isNeedAuth?"success":"danger"},{default:o(()=>[t(_(e.row.isNeedAuth?"是":"否"),1)]),_:2},1032,["type"])]),_:1}),l(f,{prop:"useIconType",label:"使用图标类型"},{default:o(e=>[l(T,{type:e.row.useIconType?"success":"danger"},{default:o(()=>[t(_(Number(e.row.useIconType)===1?"Svg":"图片"),1)]),_:2},1032,["type"])]),_:1}),l(f,{prop:"menuIcon",label:"菜单图标"},{default:o(e=>[l(ie,{style:{"font-size":"24px"},icon:e.row.menuIcon},null,8,["icon"])]),_:1}),l(f,{prop:"order",label:"排序"}),l(f,{prop:"menuPath",label:"菜单路径"},{default:o(e=>[t(_(e.row.menuPath||"---"),1)]),_:1}),l(f,{prop:"menuIframeUrl",label:"三方网页链接"},{default:o(e=>[t(_(e.row.menuIframeUrl||"---"),1)]),_:1}),l(f,{label:"操作"},{default:o(e=>[x("div",fe,[e.row.menuType?(m(),p(v,{key:0,size:"small",onClick:R=>oe(e.row)},{default:o(()=>[t(" 编辑菜单 ")]),_:2},1032,["onClick"])):c("",!0),e.row.menuType?c("",!0):(m(),p(v,{key:1,size:"small",onClick:R=>ae(e.row)},{default:o(()=>[t(" 修改默认 ")]),_:2},1032,["onClick"])),e.row.menuType?c("",!0):(m(),p(v,{key:2,type:e.row.isShow?"danger":"success",size:"small",onClick:R=>E(e.row)},{default:o(()=>[t(_(e.row.isShow?"隐藏菜单":"打开菜单"),1)]),_:2},1032,["type","onClick"])),e.row.menuType?(m(),p(B,{key:3,title:"是否删除当前菜单？",onConfirm:R=>ee(e.row)},{reference:o(()=>[l(v,{type:"danger",size:"small"},{default:o(()=>[t(" 删除菜单 ")]),_:1})]),_:2},1032,["onConfirm"])):c("",!0)])]),_:1})]),_:1},8,["data"])]),_:1}),l(Q,{modelValue:w.value,"onUpdate:modelValue":u[16]||(u[16]=e=>w.value=e),"close-on-click-modal":!1,title:O(X),width:"570",onClose:u[17]||(u[17]=e=>H(A.value))},{footer:o(()=>[x("span",Ie,[l(v,{onClick:u[14]||(u[14]=e=>w.value=!1)},{default:o(()=>[t("我再想想")]),_:1}),l(v,{type:"primary",onClick:u[15]||(u[15]=e=>ue(A.value))},{default:o(()=>[t(_(O(Z)),1)]),_:1})])]),default:o(()=>[l(K,{ref_key:"formRef",ref:A,"label-width":"140",rules:O(Y),model:a.value},{default:o(()=>[l(s,{label:"是否打开菜单",prop:"isShow"},{default:o(()=>[l($,{modelValue:a.value.isShow,"onUpdate:modelValue":u[1]||(u[1]=e=>a.value.isShow=e)},null,8,["modelValue"])]),_:1}),l(s,{label:"是否属于三方网页",prop:"isSystem"},{default:o(()=>[l($,{modelValue:a.value.isSystem,"onUpdate:modelValue":u[2]||(u[2]=e=>a.value.isSystem=e)},null,8,["modelValue"])]),_:1}),l(s,{label:"菜单文本提示信息",prop:"menuTipText"},{default:o(()=>[l(i,{modelValue:a.value.menuTipText,"onUpdate:modelValue":u[3]||(u[3]=e=>a.value.menuTipText=e),placeholder:"请填写菜单提示文字"},null,8,["modelValue"])]),_:1}),l(s,{label:"菜单使用logo类型",prop:"useIconType"},{default:o(()=>[l(V,{modelValue:a.value.useIconType,"onUpdate:modelValue":u[4]||(u[4]=e=>a.value.useIconType=e),size:"small"},{default:o(()=>[l(J,{label:1,border:""},{default:o(()=>[t(" Svg编码图标 ")]),_:1}),l(J,{label:2,border:""},{default:o(()=>[t(" 图标地址图标 ")]),_:1})]),_:1},8,["modelValue"])]),_:1}),a.value.useIconType===1?(m(),p(s,{key:0,label:"菜单图标默认编号",prop:"menuIcon"},{default:o(()=>[l(i,{modelValue:a.value.menuIcon,"onUpdate:modelValue":u[5]||(u[5]=e=>a.value.menuIcon=e),placeholder:"请填写菜单未选中ICON图标"},null,8,["modelValue"])]),_:1})):c("",!0),a.value.useIconType===1?(m(),p(s,{key:1,label:"菜单图标选中编号",prop:"menuActiveIcon"},{default:o(()=>[l(i,{modelValue:a.value.menuActiveIcon,"onUpdate:modelValue":u[6]||(u[6]=e=>a.value.menuActiveIcon=e),placeholder:"请填写菜单选中ICON图标"},null,8,["modelValue"])]),_:1})):c("",!0),a.value.useIconType===2?(m(),p(s,{key:2,label:"图片图标默认地址",prop:"imgIcon"},{default:o(()=>[l(i,{modelValue:a.value.imgIcon,"onUpdate:modelValue":u[7]||(u[7]=e=>a.value.imgIcon=e),placeholder:"请填写菜单未选中图标图片地址"},null,8,["modelValue"])]),_:1})):c("",!0),a.value.useIconType===2?(m(),p(s,{key:3,label:"图片图标选中地址",prop:"activeImgIcon"},{default:o(()=>[l(i,{modelValue:a.value.activeImgIcon,"onUpdate:modelValue":u[8]||(u[8]=e=>a.value.activeImgIcon=e),placeholder:"请填写菜单选中图标图片地址"},null,8,["modelValue"])]),_:1})):c("",!0),a.value.isSystem?(m(),p(s,{key:4,label:"加载三方网页地址",prop:"menuIframeUrl"},{default:o(()=>[l(i,{modelValue:a.value.menuIframeUrl,"onUpdate:modelValue":u[9]||(u[9]=e=>a.value.menuIframeUrl=e),placeholder:"请填写加载的三方网页地址"},null,8,["modelValue"])]),_:1})):c("",!0),l(s,{label:"数字编号排序",prop:"order"},{default:o(()=>[l(i,{modelValue:a.value.order,"onUpdate:modelValue":u[10]||(u[10]=e=>a.value.order=e),type:"number",placeholder:"请填写排序Id、越小越靠前"},null,8,["modelValue"])]),_:1}),a.value.isSystem?c("",!0):(m(),p(s,{key:5,label:"系统内菜单路径",prop:"menuPath"},{default:o(()=>[l(i,{modelValue:a.value.menuPath,"onUpdate:modelValue":u[11]||(u[11]=e=>a.value.menuPath=e),placeholder:"请填写系统内置菜单地址"},null,8,["modelValue"])]),_:1})),l(s,{label:"是否打开新窗口",prop:"isJump"},{default:o(()=>[l($,{modelValue:a.value.isJump,"onUpdate:modelValue":u[12]||(u[12]=e=>a.value.isJump=e)},null,8,["modelValue"])]),_:1}),l(s,{label:"是否需要登录访问",prop:"isNeedAuth"},{default:o(()=>[l($,{modelValue:a.value.isNeedAuth,"onUpdate:modelValue":u[13]||(u[13]=e=>a.value.isNeedAuth=e)},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue","title"]),l(Q,{modelValue:N.value,"onUpdate:modelValue":u[27]||(u[27]=e=>N.value=e),title:"修改默认信息",width:"570",onClose:u[28]||(u[28]=e=>H(A.value))},{footer:o(()=>[x("span",ye,[l(v,{onClick:u[25]||(u[25]=e=>N.value=!1)},{default:o(()=>[t("我再想想")]),_:1}),l(v,{type:"primary",onClick:u[26]||(u[26]=e=>ne(L.value))},{default:o(()=>[t(" 确认修改 ")]),_:1})])]),default:o(()=>[l(K,{ref_key:"updateFormRef",ref:L,"label-width":"120",rules:O(Y),model:r.value},{default:o(()=>[l(s,{label:"使用logo类型",prop:"useIconType"},{default:o(()=>[l(V,{modelValue:r.value.useIconType,"onUpdate:modelValue":u[18]||(u[18]=e=>r.value.useIconType=e),size:"small"},{default:o(()=>[l(J,{label:1,border:""},{default:o(()=>[t(" Svg编码图标 ")]),_:1}),l(J,{label:2,border:""},{default:o(()=>[t(" 图标地址图标 ")]),_:1})]),_:1},8,["modelValue"])]),_:1}),r.value.useIconType===1?(m(),p(s,{key:0,label:"默认ICON编码:",prop:"menuIcon"},{default:o(()=>[l(i,{modelValue:r.value.menuIcon,"onUpdate:modelValue":u[19]||(u[19]=e=>r.value.menuIcon=e),placeholder:"请填写要修改的ICON编码"},null,8,["modelValue"])]),_:1})):c("",!0),r.value.useIconType===1?(m(),p(s,{key:1,label:"选中ICON编码:",prop:"menuActiveIcon"},{default:o(()=>[l(i,{modelValue:r.value.menuActiveIcon,"onUpdate:modelValue":u[20]||(u[20]=e=>r.value.menuActiveIcon=e),placeholder:"请填写要修改的ICON编码"},null,8,["modelValue"])]),_:1})):c("",!0),r.value.useIconType===2?(m(),p(s,{key:2,label:"图片默认地址",prop:"menuIcon"},{default:o(()=>[l(i,{modelValue:r.value.imgIcon,"onUpdate:modelValue":u[21]||(u[21]=e=>r.value.imgIcon=e),placeholder:"请填写菜单未选中图标图片地址"},null,8,["modelValue"])]),_:1})):c("",!0),r.value.useIconType===2?(m(),p(s,{key:3,label:"图片选中地址",prop:"menuActiveIcon"},{default:o(()=>[l(i,{modelValue:r.value.activeImgIcon,"onUpdate:modelValue":u[22]||(u[22]=e=>r.value.activeImgIcon=e),placeholder:"请填写菜单选中图标图片地址"},null,8,["modelValue"])]),_:1})):c("",!0),l(s,{label:"修改菜单名称:",prop:"menuTipText"},{default:o(()=>[l(i,{modelValue:r.value.menuTipText,"onUpdate:modelValue":u[23]||(u[23]=e=>r.value.menuTipText=e),placeholder:"请填写要修改的菜单名称"},null,8,["modelValue"])]),_:1}),l(s,{label:"修改菜单排序:",prop:"menuTipOrder"},{default:o(()=>[l(i,{modelValue:r.value.order,"onUpdate:modelValue":u[24]||(u[24]=e=>r.value.order=e),placeholder:"请修改菜单排序 越大越靠前"},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue"])])}}});typeof W=="function"&&W(ge);export{ge as default};
