import{d as X,aS as Ie,aa as B,bu as Me,by as Ne,aT as je,bz as Oe,j as oe,i as Z,l as ae,U as ze,c as L,r as I,bA as ye,bB as Le,o as re,a as P,b as R,f as n,m as o,u as e,bC as Q,bD as W,e as t,t as g,z as j,X as fe,N as K,x as O,B as U,q,bE as H,F as he,p as De,bF as Re,bG as Be,au as xe,ap as pe,R as ge,bg as Ue,bh as ce,bH as ue,P as ve,bI as Ge,bJ as Fe,ar as Ve,bK as We,n as de,bL as qe,J as Je,bM as Ke,bN as He,A as Y,a6 as _e,ax as se,D as Xe,bO as Ye,as as Qe}from"./index-7b7a4325.js";import{N as be}from"./DataTable-8fbbc3c9.js";import{N as Ze}from"./Drawer-e5a55838.js";import{d as ne}from"./avatar-5bc4b49b.js";import{_ as et}from"./titleBar.vue_vue_type_script_setup_true_lang-32c6c741.js";import"./Dropdown-7f2fd3a7.js";import"./Popselect-6f245482.js";const tt={title:{type:String},headerStyle:[Object,String],footerStyle:[Object,String],bodyStyle:[Object,String],bodyContentStyle:[Object,String],nativeScrollbar:{type:Boolean,default:!0},scrollbarProps:Object,closable:Boolean},st=X({name:"DrawerContent",props:tt,setup(){const M=je(Oe,null);M||Ie("drawer-content","`n-drawer-content` must be placed inside `n-drawer`.");const{doUpdateShow:m}=M;function x(){m(!1)}return{handleCloseClick:x,mergedTheme:M.mergedThemeRef,mergedClsPrefix:M.mergedClsPrefixRef}},render(){const{title:M,mergedClsPrefix:m,nativeScrollbar:x,mergedTheme:$,bodyStyle:w,bodyContentStyle:u,headerStyle:f,footerStyle:s,scrollbarProps:r,closable:d,$slots:p}=this;return B("div",{role:"none",class:[`${m}-drawer-content`,x&&`${m}-drawer-content--native-scrollbar`]},p.header||M||d?B("div",{class:`${m}-drawer-header`,style:f,role:"none"},B("div",{class:`${m}-drawer-header__main`,role:"heading","aria-level":"1"},p.header!==void 0?p.header():M),d&&B(Ne,{onClick:this.handleCloseClick,clsPrefix:m,class:`${m}-drawer-header__close`,absolute:!0})):null,x?B("div",{class:`${m}-drawer-body`,style:w,role:"none"},B("div",{class:`${m}-drawer-body-content-wrapper`,style:u,role:"none"},p)):B(Me,Object.assign({themeOverrides:$.peerOverrides.Scrollbar,theme:$.peers.Scrollbar},r,{class:`${m}-drawer-body`,contentClass:`${m}-drawer-body-content-wrapper`,contentStyle:u}),p),p.footer?B("div",{class:`${m}-drawer-footer`,style:s,role:"none"},p.footer()):null)}}),nt={1:"注册赠送",2:"受邀请赠送",3:"邀请他人赠送",4:"购买卡密充值",5:"管理员赠送",6:"扫码购买充值",7:"绘画失败退款",8:"签到奖励",101:"对话扣除",102:"绘画扣除"},ot={class:"flex h-full flex-col"},at=t("div",null,"用户钱包余额",-1),rt=t("div",{class:"text-[#95aac9] mb-2 text-base"}," 基础模型余额 ",-1),it={class:"text-3xl text-[#555]"},lt=t("span",{class:"ml-4 text-[#989898]"},"每次对话根据模型消费不同积分！",-1),ct=t("div",{class:"text-[#95aac9] mb-2 text-base"}," 高级模型余额 ",-1),ut={class:"text-3xl text-[#555]"},dt=t("span",{class:"ml-4 text-[#989898]"},"每次对话根据模型消费不同积分！",-1),ft=t("div",{class:"text-[#95aac9] mb-2 text-base"}," MJ绘画余额 ",-1),pt={class:"text-3xl text-[#555]"},mt=t("span",{class:"ml-4 text-[#989898]"},"根据画图动作消耗不同的积分！",-1),vt=t("div",{class:"text-[#95aac9] mb-2 text-base"}," 卡密充值 ",-1),_t=t("div",null,"充值记录",-1),yt={class:"relative"},ht=["src"],xt={class:"flex justify-between items-end min-h-28"},gt=t("span",{class:"text-sm font-bold mr-1"},"基础模型额度",-1),bt={class:"font-bold"},wt={class:"flex justify-between items-end min-h-28"},kt=t("span",{class:"text-sm font-bold mr-1"},"高级模型额度",-1),Ct={class:"font-bold"},St={class:"flex justify-between items-end min-h-28"},$t=t("span",{class:"text-sm font-bold mr-1"},"MJ绘画额度",-1),At={class:"font-bold"},Pt={class:"flex justify-between items-end mt-5"},Tt={class:"text-xl text-[red] font-bold"},Et=X({__name:"wallet",setup(M){const{isSmallMd:m,isMobile:x}=oe(),$=Z(),w=ae();ze();const u=L(()=>$.userBalance),f=I(!1),s=I(""),r=I(!1),d=I([]),p=I(!1),b=ye({page:1,pageSize:10,showSizePicker:!0,pageSizes:[10,20,50],onChange:T=>{b.page=T,v()},onUpdatePageSize:T=>{b.pageSize=T,b.page=1,v()}}),C=L(()=>[{title:"订单编号",key:"uid"},{title:"充值类型",key:"rechargeType",render(T){return nt[T.rechargeType]}},{title:"基础模型额度",key:"model3Count"},{title:"高级模型额度",key:"model4Count"},{title:"MJ绘画额度",key:"drawMjCount"},{title:"有效期",key:"expireDateCn"},{title:"充值时间",key:"createdAt",render(T){return T.createdAt}}]),S=I([]);async function v(){const T=await Le({page:b.page,size:b.pageSize}),{rows:D}=T.data;S.value=D}async function a(){if(!s.value)return w.warning("请先填写卡密！");try{f.value=!0,await Re({code:s.value}),w.success("卡密兑换成功、祝您使用愉快！"),v(),$.getUserInfo(),f.value=!1}catch{f.value=!1}}function c(){r.value=!0}async function A(){const T=await Be({status:1,size:30});d.value=T.data.rows}const V=L(()=>{var T;return(T=$.globalConfig)==null?void 0:T.buyCramiAddress});function J(){window.open(V.value)}return re(()=>{v()}),(T,D)=>(P(),R("div",ot,[n(e(H),null,{header:o(()=>[at]),default:o(()=>[n(e(Q),{"x-gap":24,"y-gap":24,cols:e(m)?1:2,class:"mt-3"},{default:o(()=>[n(e(W),{class:"border dark:border-[#ffffff17] rounded-sm p-3"},{default:o(()=>[rt,t("b",it,g(e(u).sumModel3Count??0),1),j(),lt]),_:1}),n(e(W),{class:"border dark:border-[#ffffff17] rounded-sm p-3"},{default:o(()=>[ct,t("b",ut,g(e(u).sumModel4Count??0),1),j(),dt]),_:1}),n(e(W),{class:"border dark:border-[#ffffff17] rounded-sm p-3"},{default:o(()=>[ft,t("b",pt,g(e(u).sumDrawMjCount??0),1),j(),mt]),_:1}),n(e(W),{class:"border dark:border-[#ffffff17] rounded-sm p-3"},{default:o(()=>[vt,n(e(fe),{wrap:!1},{default:o(()=>[n(e(K),{value:s.value,"onUpdate:value":D[0]||(D[0]=z=>s.value=z),placeholder:"请粘贴或填写您的卡密信息！",class:"mr-3",maxlength:"128","show-count":"",clearable:""},null,8,["value"]),n(e(O),{type:"primary",loading:f.value,onClick:a},{default:o(()=>[j(" 兑换 ")]),_:1},8,["loading"]),e(V)?(P(),U(e(O),{key:0,type:"success",onClick:c},{default:o(()=>[j(" 购买卡密 ")]),_:1})):q("",!0)]),_:1})]),_:1})]),_:1},8,["cols"])]),_:1}),n(e(H),{class:"mt-5 flex-1"},{header:o(()=>[_t]),default:o(()=>[n(e(be),{columns:e(C),loading:p.value,"scroll-x":800,data:S.value,"max-height":"195",pagination:b},null,8,["columns","loading","data","pagination"])]),_:1}),n(e(Ze),{show:r.value,"onUpdate:show":D[1]||(D[1]=z=>r.value=z),width:e(m)?"100%":502,"on-after-enter":A},{default:o(()=>[n(e(st),{title:"套餐购买",closable:""},{default:o(()=>[n(e(Q),{"x-gap":15,"y-gap":15,cols:e(m)?1:2,class:"mt-3"},{default:o(()=>[(P(!0),R(he,null,De(d.value,(z,N)=>(P(),U(e(W),{key:N},{default:o(()=>[n(e(H),{size:"small",embedded:""},{header:o(()=>[t("div",yt,[t("b",null,g(z.name),1)])]),cover:o(()=>[t("img",{src:z.coverImg},null,8,ht)]),default:o(()=>[t("div",null,[t("p",null,g(z.des),1),t("div",xt,[gt,t("span",bt,g(z.model3Count),1)]),t("div",wt,[kt,t("span",Ct,g(z.model4Count),1)]),t("div",St,[$t,t("span",At,g(z.drawMjCount),1)]),t("div",Pt,[t("i",Tt,g(`￥${z.price}`),1),n(e(O),{type:"primary",dashed:"",size:"small",onClick:J},{default:o(()=>[j(" 购买套餐 ")]),_:1})])])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["cols"])]),_:1})]),_:1},8,["show","width"])]))}}),It={class:"flex flex-col justify-center items-center"},Mt={class:"text-2xl text-primary self-start mb-3 flex justify-between w-full"},Nt=t("span",null,"Profile",-1),jt={class:"mt-3 text-lg text-[#555]"},Ot={class:"text-[#95aac9] mt-2"},zt={class:"text-[#555] mt-3 px-4"},Lt={class:"self-start"},Dt=t("div",{class:"flex pl-3 pt-3 text-base font-bold text-primary"},[t("span",null,"我的账户余额")],-1),Rt={key:0,class:"flex pl-3 pt-3 text-base font-bold text-primary"},Bt=t("span",null,"会员过期时间：",-1),Ut={class:"flex items-center space-x-4 pl-3 mt-3"},Gt=t("span",{class:"flex-shrink-0 w-24 text-primary"},"基础模型余额:",-1),Ft={class:"w-[200px]"},Vt={class:"flex items-center space-x-4 pl-3 mt-3"},Wt=t("span",{class:"flex-shrink-0 w-24 text-primary"},"高级模型余额:",-1),qt={class:"w-[200px]"},Jt={class:"flex items-center space-x-4 pl-3 mt-3"},Kt=t("span",{class:"flex-shrink-0 w-24 text-primary"},"绘画余额:",-1),Ht={class:"w-[200px]"},Xt={class:"flex items-center space-x-4 pl-3 mt-3"},Yt=t("span",{class:"flex-shrink-0 w-24 text-primary"},"绑定微信:",-1),Qt={class:"w-[200px]"},Zt={key:1},es=X({__name:"detail",setup(M){const m=Z(),x=ge(),{userBalance:$}=m,w=xe(),u=L(()=>m.userInfo.email||""),f=L(()=>m.userInfo.isBindWx),s=I(m.userInfo.avatar??ne),r=I(m.userInfo.username??"未登录"),d=I(m.userInfo.sign??"我是一台基于深度学习和自然语言处理技术的 AI 机器人，旨在为用户提供高效、精准、个性化的智能服务。");function p(){m.logOut(),x.push("/")}const b=L(()=>m.isLogin);return re(()=>{b.value||m.setLoginDialog(!0)}),(C,S)=>(P(),R("div",It,[t("div",Mt,[Nt,e(b)?(P(),U(e(O),{key:0,tertiary:"",type:"error",onClick:p},{default:o(()=>[j(" 退出登录 ")]),_:1})):q("",!0),e(b)?q("",!0):(P(),U(e(O),{key:1,tertiary:"",type:"success",onClick:S[0]||(S[0]=v=>e(m).setLoginDialog(!0))},{default:o(()=>[j(" 点击登入 ")]),_:1}))]),n(e(pe),{size:148,src:s.value,"fallback-src":e(ne)},null,8,["src","fallback-src"]),t("b",jt,g(r.value),1),t("span",Ot,g(e(u)),1),t("div",zt,g(d.value),1),t("div",Lt,[Dt,e($).expirationTime?(P(),R("div",Rt,[Bt,t("span",null,g(e($).expirationTime),1)])):q("",!0),t("div",Ut,[Gt,t("div",Ft,g(e($).sumModel3Count||"0")+" 积分 ",1)]),t("div",Vt,[Wt,t("div",qt,g(e($).sumModel4Count||"0")+" 积分 ",1)]),t("div",Jt,[Kt,t("div",Ht,g(e($).sumDrawMjCount||"0")+" 积分 ",1)]),t("div",Xt,[Yt,t("div",Qt,[e(f)?(P(),R("span",Zt,"已绑定微信")):(P(),U(e(O),{key:0,text:"",onClick:S[1]||(S[1]=v=>e(w).updateBindwxDialog(!0))},{default:o(()=>[j(" 点击绑定微信 ")]),_:1}))])])])]))}}),ts=t("div",null,"变更您的密码",-1),ss={class:"flex justify-between"},ns=t("span",{class:"text-[#95AAC9]"},"更新密码完成后将重新登录！",-1),os=t("b",{class:"text-base"},"密码要求",-1),as=t("p",{class:"text-[#95AAC9] mt-3"}," 要创建一个新的密码，你必须满足以下所有要求。 ",-1),rs=t("div",{class:"ml-3 text-[#95AAC9] mt-2"}," 最少6个字符 ",-1),is=t("div",{class:"ml-3 text-[#95AAC9] mt-2"}," 最多30个字符 ",-1),ls=t("div",{class:"ml-3 text-[#95AAC9] mt-2"}," 至少带有一个数字 ",-1),cs=X({__name:"password",setup(M){const m=I({oldPassword:"",password:"",reenteredPassword:""}),x=m,$=I(null),w=I(null),u={oldPassword:[{required:!0,min:6,message:"密码最短长度为6位数",trigger:["blur"]},{required:!0,max:30,message:"密码最长长度为30位数",trigger:["blur"]}],password:[{required:!0,message:"请输入密码"}],reenteredPassword:[{required:!0,message:"请再次输入密码",trigger:["input","blur"]},{validator:f,message:"两次密码输入不一致",trigger:"input"},{validator:s,message:"两次密码输入不一致",trigger:["blur","password-input"]}]};function f(a,c){return!!m.value.password&&m.value.password.startsWith(c)&&m.value.password.length>=c.length}function s(a,c){return c===m.value.password}function r(){var a;m.value.reenteredPassword&&((a=w.value)==null||a.validate({trigger:"password-input"}))}const{isSmallXl:d}=oe(),p=Z(),b=ae();async function C(a){(await Ge(a)).success&&b.success("密码更新成功、请重新登录系统！"),S(),p.updatePasswordSuccess()}function S(){m.value={oldPassword:"",password:"",reenteredPassword:""}}function v(a){var c;a.preventDefault(),(c=$.value)==null||c.validate(async A=>{if(!A){const{oldPassword:V,password:J}=m.value;C({oldPassword:V,password:J})}})}return(a,c)=>(P(),U(e(H),null,{header:o(()=>[ts]),default:o(()=>[n(e(Q),{"x-gap":24,"y-gap":24,cols:e(d)?1:3,class:"mt-3"},{default:o(()=>[n(e(W),{class:"border rounded-sm p-3 dark:border-[#ffffff17]",span:"2"},{default:o(()=>[n(e(Ue),{ref_key:"formRef",ref:$,model:e(x),rules:u},{default:o(()=>[n(e(ce),{path:"oldPassword",label:"旧密码"},{default:o(()=>[n(e(K),{value:e(x).oldPassword,"onUpdate:value":c[0]||(c[0]=A=>e(x).oldPassword=A),onKeydown:c[1]||(c[1]=ue(ve(()=>{},["prevent"]),["enter"]))},null,8,["value"])]),_:1}),n(e(ce),{path:"password",label:"新密码"},{default:o(()=>[n(e(K),{value:e(x).password,"onUpdate:value":c[2]||(c[2]=A=>e(x).password=A),type:"password",onInput:r,onKeydown:c[3]||(c[3]=ue(ve(()=>{},["prevent"]),["enter"]))},null,8,["value"])]),_:1}),n(e(ce),{ref_key:"rPasswordFormItemRef",ref:w,first:"",path:"reenteredPassword",label:"确认密码"},{default:o(()=>[n(e(K),{value:e(x).reenteredPassword,"onUpdate:value":c[4]||(c[4]=A=>e(x).reenteredPassword=A),disabled:!e(x).password,type:"password",tabindex:"0",onKeyup:ue(v,["enter"])},null,8,["value","disabled","onKeyup"])]),_:1},512),t("div",ss,[ns,n(e(O),{disabled:e(x).oldPassword===null,type:"primary",onClick:v},{default:o(()=>[j(" 更新您的密码 ")]),_:1},8,["disabled"])])]),_:1},8,["model"])]),_:1}),n(e(W),{class:"border rounded-sm p-3 bg-[#f8f9fa] h-48 dark:bg-[#18181c] dark:border-[#ffffff17]"},{default:o(()=>[os,as,rs,is,ls]),_:1})]),_:1},8,["cols"])]),_:1}))}});var we={exports:{}};/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT © Zeno Rocha
 */(function(M,m){(function($,w){M.exports=w()})(Fe,function(){return function(){var x={686:function(u,f,s){s.d(f,{default:function(){return Ee}});var r=s(279),d=s.n(r),p=s(370),b=s.n(p),C=s(817),S=s.n(C);function v(h){try{return document.execCommand(h)}catch{return!1}}var a=function(l){var i=S()(l);return v("cut"),i},c=a;function A(h){var l=document.documentElement.getAttribute("dir")==="rtl",i=document.createElement("textarea");i.style.fontSize="12pt",i.style.border="0",i.style.padding="0",i.style.margin="0",i.style.position="absolute",i.style[l?"right":"left"]="-9999px";var _=window.pageYOffset||document.documentElement.scrollTop;return i.style.top="".concat(_,"px"),i.setAttribute("readonly",""),i.value=h,i}var V=function(l,i){var _=A(l);i.container.appendChild(_);var y=S()(_);return v("copy"),_.remove(),y},J=function(l){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},_="";return typeof l=="string"?_=V(l,i):l instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(l==null?void 0:l.type)?_=V(l.value,i):(_=S()(l),v("copy")),_},T=J;function D(h){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?D=function(i){return typeof i}:D=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},D(h)}var z=function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=l.action,_=i===void 0?"copy":i,y=l.container,k=l.target,F=l.text;if(_!=="copy"&&_!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(k!==void 0)if(k&&D(k)==="object"&&k.nodeType===1){if(_==="copy"&&k.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(_==="cut"&&(k.hasAttribute("readonly")||k.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(F)return T(F,{container:y});if(k)return _==="cut"?c(k):T(k,{container:y})},N=z;function E(h){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?E=function(i){return typeof i}:E=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},E(h)}function G(h,l){if(!(h instanceof l))throw new TypeError("Cannot call a class as a function")}function me(h,l){for(var i=0;i<l.length;i++){var _=l[i];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,_.key,_)}}function ke(h,l,i){return l&&me(h.prototype,l),i&&me(h,i),h}function Ce(h,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(l&&l.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),l&&ie(h,l)}function ie(h,l){return ie=Object.setPrototypeOf||function(_,y){return _.__proto__=y,_},ie(h,l)}function Se(h){var l=Pe();return function(){var _=ee(h),y;if(l){var k=ee(this).constructor;y=Reflect.construct(_,arguments,k)}else y=_.apply(this,arguments);return $e(this,y)}}function $e(h,l){return l&&(E(l)==="object"||typeof l=="function")?l:Ae(h)}function Ae(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function Pe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function ee(h){return ee=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},ee(h)}function le(h,l){var i="data-clipboard-".concat(h);if(l.hasAttribute(i))return l.getAttribute(i)}var Te=function(h){Ce(i,h);var l=Se(i);function i(_,y){var k;return G(this,i),k=l.call(this),k.resolveOptions(y),k.listenClick(_),k}return ke(i,[{key:"resolveOptions",value:function(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof y.action=="function"?y.action:this.defaultAction,this.target=typeof y.target=="function"?y.target:this.defaultTarget,this.text=typeof y.text=="function"?y.text:this.defaultText,this.container=E(y.container)==="object"?y.container:document.body}},{key:"listenClick",value:function(y){var k=this;this.listener=b()(y,"click",function(F){return k.onClick(F)})}},{key:"onClick",value:function(y){var k=y.delegateTarget||y.currentTarget,F=this.action(k)||"copy",te=N({action:F,container:this.container,target:this.target(k),text:this.text(k)});this.emit(te?"success":"error",{action:F,text:te,trigger:k,clearSelection:function(){k&&k.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(y){return le("action",y)}},{key:"defaultTarget",value:function(y){var k=le("target",y);if(k)return document.querySelector(k)}},{key:"defaultText",value:function(y){return le("text",y)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(y){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return T(y,k)}},{key:"cut",value:function(y){return c(y)}},{key:"isSupported",value:function(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],k=typeof y=="string"?[y]:y,F=!!document.queryCommandSupported;return k.forEach(function(te){F=F&&!!document.queryCommandSupported(te)}),F}}]),i}(d()),Ee=Te},828:function(u){var f=9;if(typeof Element<"u"&&!Element.prototype.matches){var s=Element.prototype;s.matches=s.matchesSelector||s.mozMatchesSelector||s.msMatchesSelector||s.oMatchesSelector||s.webkitMatchesSelector}function r(d,p){for(;d&&d.nodeType!==f;){if(typeof d.matches=="function"&&d.matches(p))return d;d=d.parentNode}}u.exports=r},438:function(u,f,s){var r=s(828);function d(C,S,v,a,c){var A=b.apply(this,arguments);return C.addEventListener(v,A,c),{destroy:function(){C.removeEventListener(v,A,c)}}}function p(C,S,v,a,c){return typeof C.addEventListener=="function"?d.apply(null,arguments):typeof v=="function"?d.bind(null,document).apply(null,arguments):(typeof C=="string"&&(C=document.querySelectorAll(C)),Array.prototype.map.call(C,function(A){return d(A,S,v,a,c)}))}function b(C,S,v,a){return function(c){c.delegateTarget=r(c.target,S),c.delegateTarget&&a.call(C,c)}}u.exports=p},879:function(u,f){f.node=function(s){return s!==void 0&&s instanceof HTMLElement&&s.nodeType===1},f.nodeList=function(s){var r=Object.prototype.toString.call(s);return s!==void 0&&(r==="[object NodeList]"||r==="[object HTMLCollection]")&&"length"in s&&(s.length===0||f.node(s[0]))},f.string=function(s){return typeof s=="string"||s instanceof String},f.fn=function(s){var r=Object.prototype.toString.call(s);return r==="[object Function]"}},370:function(u,f,s){var r=s(879),d=s(438);function p(v,a,c){if(!v&&!a&&!c)throw new Error("Missing required arguments");if(!r.string(a))throw new TypeError("Second argument must be a String");if(!r.fn(c))throw new TypeError("Third argument must be a Function");if(r.node(v))return b(v,a,c);if(r.nodeList(v))return C(v,a,c);if(r.string(v))return S(v,a,c);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function b(v,a,c){return v.addEventListener(a,c),{destroy:function(){v.removeEventListener(a,c)}}}function C(v,a,c){return Array.prototype.forEach.call(v,function(A){A.addEventListener(a,c)}),{destroy:function(){Array.prototype.forEach.call(v,function(A){A.removeEventListener(a,c)})}}}function S(v,a,c){return d(document.body,v,a,c)}u.exports=p},817:function(u){function f(s){var r;if(s.nodeName==="SELECT")s.focus(),r=s.value;else if(s.nodeName==="INPUT"||s.nodeName==="TEXTAREA"){var d=s.hasAttribute("readonly");d||s.setAttribute("readonly",""),s.select(),s.setSelectionRange(0,s.value.length),d||s.removeAttribute("readonly"),r=s.value}else{s.hasAttribute("contenteditable")&&s.focus();var p=window.getSelection(),b=document.createRange();b.selectNodeContents(s),p.removeAllRanges(),p.addRange(b),r=p.toString()}return r}u.exports=f},279:function(u){function f(){}f.prototype={on:function(s,r,d){var p=this.e||(this.e={});return(p[s]||(p[s]=[])).push({fn:r,ctx:d}),this},once:function(s,r,d){var p=this;function b(){p.off(s,b),r.apply(d,arguments)}return b._=r,this.on(s,b,d)},emit:function(s){var r=[].slice.call(arguments,1),d=((this.e||(this.e={}))[s]||[]).slice(),p=0,b=d.length;for(p;p<b;p++)d[p].fn.apply(d[p].ctx,r);return this},off:function(s,r){var d=this.e||(this.e={}),p=d[s],b=[];if(p&&r)for(var C=0,S=p.length;C<S;C++)p[C].fn!==r&&p[C].fn._!==r&&b.push(p[C]);return b.length?d[s]=b:delete d[s],this}},u.exports=f,u.exports.TinyEmitter=f}},$={};function w(u){if($[u])return $[u].exports;var f=$[u]={exports:{}};return x[u](f,f.exports,w),f.exports}return function(){w.n=function(u){var f=u&&u.__esModule?function(){return u.default}:function(){return u};return w.d(f,{a:f}),f}}(),function(){w.d=function(u,f){for(var s in f)w.o(f,s)&&!w.o(u,s)&&Object.defineProperty(u,s,{enumerable:!0,get:f[s]})}}(),function(){w.o=function(u,f){return Object.prototype.hasOwnProperty.call(u,f)}}(),w(686)}().default})})(we);var us=we.exports;const ds=Ve(us),fs=M=>{const m=(M==null?void 0:M.appendToBody)===void 0?!0:M.appendToBody;return{toClipboard(x,$){return new Promise((w,u)=>{const f=document.createElement("button"),s=new ds(f,{text:()=>x,action:()=>"copy",container:$!==void 0?$:document.body});s.on("success",r=>{s.destroy(),w(r)}),s.on("error",r=>{s.destroy(),u(r)}),m&&document.body.appendChild(f),f.click(),m&&document.body.removeChild(f)})}}},ps=t("div",null,"邀用户、得福利!",-1),ms=t("div",{class:"text-[#95aac9] mb-2 text-base"}," 我的邀请码 ",-1),vs={class:"text-2xl text-[#555] dark:text-[#fff] whitespace-nowrap"},_s=t("b",{class:"text-[000]"},"Tips",-1),ys={class:"flex flex-col text-[#707384]"},hs=t("div",null,"邀请记录",-1),xs=X({__name:"invite",setup(M){const{toClipboard:m}=fs(),x=Z(),$=L(()=>x.userInfo.inviteCode),w=L(()=>x.globalConfig),{isSmallXl:u,isMobile:f}=oe(),s=ae(),r=I(!1),d=ye({page:1,pageSize:10,showSizePicker:!0,pageSizes:[10,20,50],onChange:a=>{d.page=a,S()},onUpdatePageSize:a=>{d.pageSize=a,d.page=1,S()}}),p=L(()=>[{title:"头像",key:"avatar",render(a){return B(pe,{src:a.avatar,size:"small",round:!0})}},{title:"用户名称",key:"username"},{title:"用户邮箱",key:"email"},{title:"受邀人状态",key:"status",render(a){return B(O,{type:a.status===1?"primary":"error",size:"small",round:!0,quaternary:!0},{default:()=>a.status===1?"已认证":"未激活"})}},{title:"邀请时间",key:"createdAt",render(a){return B("div",{style:{fontSize:"12px",color:"#999"}},()=>a.createdAt)}},{title:"获得奖励状态",key:"status",render(a){return B(O,{type:a.status===1?"success":"warning",size:"small",round:!0,quaternary:!0},{default:()=>a.status===1?"已领取邀请奖励":"等待受邀人确认"})}}]),b=I([]);async function C(){const a=await qe();if(!a.data)return s.error(a.message);s.success("生成邀请链接成功"),x.getUserInfo()}async function S(){try{r.value=!0;const a=await We({page:d.page,size:d.pageSize});b.value=a.data.rows,r.value=!1}catch{r.value=!1}}async function v(){if(!$.value)return s.error("请先生成您的专属邀请链接！");const a=`${window.location.href}?inVitecode=${$.value}`;try{await m(a),s.success("复制专属邀请链接成功！")}catch{s.error("当前设置不支持自动复制、手动复制吧！")}}return re(()=>{S()}),(a,c)=>(P(),R(he,null,[n(e(H),null,{header:o(()=>[ps]),default:o(()=>[n(e(Q),{"x-gap":24,"y-gap":24,cols:e(u)?1:3,class:"mt-3"},{default:o(()=>{var A;return[n(e(W),{class:"border rounded-sm p-3 dark:border-[#ffffff17]",span:2},{default:o(()=>[ms,t("div",{class:de(["flex justify-between",[e(u)?"flex-col mt-3":""]])},[t("b",vs,g(e($)||"********"),1),n(e(fe),{class:de([e(u)?" mt-3":""])},{default:o(()=>[n(e(O),{type:"success",onClick:C},{default:o(()=>[j(" 生成专属邀请码 ")]),_:1}),n(e(O),{type:"primary",onClick:v},{default:o(()=>[j(" 复制专属邀请链接 ")]),_:1})]),_:1},8,["class"])],2)]),_:1}),Number((A=e(w))==null?void 0:A.inviteSendStatus)===1?(P(),U(e(W),{key:0,class:"border rounded-sm p-3 dark:border-[#ffffff17]",span:1},{default:o(()=>[_s,t("div",ys,[t("span",null,"邀请一位用户赠送"+g(e(w).inviteGiveSendModel3Count)+"积分基础模型额度+"+g(e(w).inviteGiveSendModel4Count)+"积分高级模型额度+"+g(e(w).inviteGiveSendDrawMjCount)+"MJ绘画积分额度",1),t("span",null,"收到邀请用户获得"+g(e(w).invitedGuestSendModel3Count)+"积分基础模型额度+"+g(e(w).invitedGuestSendModel4Count)+"积分高级模型额度+"+g(e(w).invitedGuestSendDrawMjCount)+"MJ绘画积分额度",1)])]),_:1})):q("",!0)]}),_:1},8,["cols"])]),_:1}),n(e(H),{class:"mt-5"},{header:o(()=>[hs]),default:o(()=>[n(e(be),{loading:r.value,remote:!0,"pagination-behavior-on-filter":"first",class:"min-h-[350px]",columns:e(p),data:b.value,pagination:d,"scroll-x":500},null,8,["loading","columns","data","pagination"])]),_:1})],64))}}),gs={"has-sider":"",class:"flex h-full"},bs={key:0,"content-style":"padding: 24px;",class:"w-[380px] p-4 rounded-md dark:bg-[#1f1f1f]"},ws={class:"flex flex-col justify-center items-center"},ks={class:"text-2xl text-primary self-start mb-14 flex justify-between w-full"},Cs=t("span",null,"Profile",-1),Ss={class:"mt-3 text-lg text-[#555]"},$s={class:"text-[#95aac9] mt-2"},As={class:"text-[#555] mt-3 px-4"},Ps={class:"self-start mt-16"},Ts=t("div",{class:"text-xl text-primary"}," 我在本站的使用记录 ",-1),Es={class:"flex items-center space-x-4 pl-3 mt-3"},Is=t("span",{class:"flex-shrink-0 w-[90px] text-keft text-primary"},"基础模型积分:",-1),Ms={class:"w-[230px]"},Ns={class:"flex items-center space-x-4 pl-3 mt-3"},js=t("span",{class:"flex-shrink-0 w-[90px] text-keft text-primary"},"高级模型积分:",-1),Os={class:"w-[230px]"},zs={class:"flex items-center space-x-4 pl-3 mt-3"},Ls=t("span",{class:"flex-shrink-0 w-[90px] text-keft text-primary"},"基础模型使用:",-1),Ds={class:"w-[230px]"},Rs={class:"flex items-center space-x-4 pl-3 mt-3"},Bs=t("span",{class:"flex-shrink-0 w-[90px] text-keft text-primary"},"高级模型使用:",-1),Us={class:"w-[230px]"},Gs={class:"flex items-center space-x-4 pl-3 mt-3"},Fs=t("span",{class:"flex-shrink-0 w-[90px] text-keft text-primary"},"绘画使用积分:",-1),Vs={class:"w-[230px]"},Ws={key:0,class:"flex items-center space-x-4 pl-3 mt-3"},qs=t("span",{class:"flex-shrink-0 w-[90px] text-keft text-primary"},"绑定微信:",-1),Js={class:"w-[230px]"},Ks={key:1},Hs={key:1,class:"flex items-center space-x-4 pl-3 mt-3"},Xs=t("span",{class:"flex-shrink-0 w-[90px] text-keft text-primary"},"绑定微信:",-1),Ys={class:"w-[230px]"},Qs={key:0,class:"flex text-[red] pt-8 text-base font-bold"},Zs=t("span",null,"会员过期时间：",-1),en={class:"h-[calc(100vh-250px)] overflow-y-scroll"},tn={key:1},sn={class:"flex items-center space-x-4"},nn={class:"flex-shrink-0 w-[60px]"},on={class:"flex-1"},an={class:"flex items-center space-x-4 mt-5"},rn={class:"flex-shrink-0 w-[60px]"},ln={class:"flex-1"},cn={class:"flex space-x-4 mt-5"},un={class:"flex-shrink-0 w-[60px]"},dn={class:"flex-1"},fn={class:"h-[calc(100vh-250px)] overflow-y-scroll"},bn=X({__name:"index",setup(M){const m=xe(),x=Z(),$=ge(),w=I(0),u=L(()=>x.userBalance),f=L(()=>{var N;return(N=x.globalConfig)==null?void 0:N.isUseWxLogin}),s=I(!0),r=L(()=>x.isLogin),d=ae(),p=L(()=>x.userInfo.email||""),b=L(()=>x.userInfo.isBindWx),C=I(x.userInfo.avatar??ne),S=I(x.userInfo.username??"未登录"),v=I(x.userInfo.sign??"我是一台基于深度学习和自然语言处理技术的 AI 机器人，旨在为用户提供高效、精准、个性化的智能服务。"),a=I(!1),{isSmallLg:c,isMobile:A}=oe();async function V(){const N=await Ke();w.value=N.data||0}async function J(){(await He()).success&&d.success("已同步数据完成"),V()}async function T(N){try{a.value=!0;const E=await Ye(N);if(a.value=!1,!E.success)return d.error(E.message);d.success(Qe("common.updateUserSuccess")),x.getUserInfo()}catch{a.value=!1}}function D(){r.value||x.setLoginDialog(!0)}re(()=>{D(),V()});function z(){x.logOut(),$.push("/")}return setTimeout(()=>{s.value=!1},500),(N,E)=>(P(),R("div",gs,[e(c)?q("",!0):(P(),R("div",bs,[t("div",ws,[t("div",ks,[Cs,n(e(O),{tertiary:"",type:"error",onClick:z},{default:o(()=>[j(" 退出登录 ")]),_:1})]),n(e(pe),{size:148,src:C.value,"fallback-src":e(ne)},null,8,["src","fallback-src"]),t("b",Ss,g(S.value),1),t("span",$s,g(e(p)),1),t("div",As,g(v.value),1),t("div",Ps,[Ts,t("div",Es,[Is,t("div",Ms,g(e(u).useModel3Count||"0")+" 积分 ",1)]),t("div",Ns,[js,t("div",Os,g(e(u).useModel4Count||"0")+" 积分 ",1)]),t("div",zs,[Ls,t("div",Ds,g(e(u).useModel3Token||"0")+" Token ",1)]),t("div",Rs,[Bs,t("div",Us,g(e(u).useModel4Token||"0")+" Token ",1)]),t("div",Gs,[Fs,t("div",Vs,g(e(u).useDrawMjToken||"0")+" 积分 ",1)]),e(f)?(P(),R("div",Ws,[qs,t("div",Js,[e(b)?(P(),R("span",Ks,"已绑定微信")):(P(),U(e(O),{key:0,text:"",onClick:E[0]||(E[0]=G=>e(m).updateBindwxDialog(!0))},{default:o(()=>[j(" 点击绑定微信 ")]),_:1}))])])):q("",!0),w.value>0?(P(),R("div",Hs,[Xs,t("div",Ys,[n(e(O),{text:"",onClick:J},{default:o(()=>[j(" 点击同步访客数据 ")]),_:1})])])):q("",!0)])]),e(u).expirationTime?(P(),R("div",Qs,[Zs,t("span",null,g(e(u).expirationTime),1)])):q("",!0)])),t("div",{class:de(["flex flex-col dark:bg-[#1f1f1f] rounded-md",[e(A)?"w-full  ":"flex-1 ml-[12px]"]]),style:Je({padding:e(A)?"10px":"0 28px 0 28px"})},[n(e(et),{title:"个人中心",des:"编辑个人信息、查看更多详情",padding:(e(A),1)},null,8,["padding"]),n(e(Xe),{type:"line",animated:"",class:"mt-5 flex-1"},{default:o(()=>[e(c)?(P(),U(e(Y),{key:0,name:"detail",tab:"我的详情"},{default:o(()=>[n(es)]),_:1})):q("",!0),n(e(Y),{name:"account",tab:"我的钱包"},{default:o(()=>[t("div",en,[n(e(_e),null,{default:o(()=>[n(Et)]),_:1})])]),_:1}),n(e(Y),{name:"baseInfo",tab:"基础信息"},{default:o(()=>[n(e(H),null,{header:o(()=>[s.value||!e(r)?(P(),U(e(se),{key:0,size:"medium",width:"20%"})):(P(),R("div",tn,"用户基础设置"))]),default:o(()=>[s.value||!e(r)?(P(),U(e(fe),{key:0,vertical:""},{default:o(()=>[n(e(se),{height:"40px",size:"medium"}),n(e(se),{height:"40px",size:"medium"}),n(e(se),{height:"80px",size:"medium"})]),_:1})):(P(),U(e(Q),{key:1,"x-gap":"12",cols:1},{default:o(()=>[n(e(W),null,{default:o(()=>[t("div",sn,[t("span",nn,g(N.$t("setting.avatarLink")),1),t("div",on,[n(e(K),{value:C.value,"onUpdate:value":E[1]||(E[1]=G=>C.value=G),placeholder:"请填写头像地址"},null,8,["value"])]),n(e(O),{size:"tiny",text:"",type:"primary",onClick:E[2]||(E[2]=G=>T({avatar:C.value}))},{default:o(()=>[j(g(N.$t("common.update")),1)]),_:1})]),t("div",an,[t("span",rn,g(N.$t("setting.name")),1),t("div",ln,[n(e(K),{value:S.value,"onUpdate:value":E[3]||(E[3]=G=>S.value=G),placeholder:"请编辑您的用户名",maxlength:"12","show-count":"",clearable:""},null,8,["value"])]),n(e(O),{size:"tiny",text:"",type:"primary",onClick:E[4]||(E[4]=G=>T({username:S.value}))},{default:o(()=>[j(g(N.$t("common.update")),1)]),_:1})]),t("div",cn,[t("span",un,g(N.$t("setting.sign")),1),t("div",dn,[n(e(K),{value:v.value,"onUpdate:value":E[5]||(E[5]=G=>v.value=G),placeholder:"请编辑您的签名",maxlength:"128","show-count":"",clearable:"",type:"textarea"},null,8,["value"])]),n(e(O),{size:"tiny",text:"",type:"primary",onClick:E[6]||(E[6]=G=>T({sign:v.value}))},{default:o(()=>[j(g(N.$t("common.update")),1)]),_:1})])]),_:1})]),_:1}))]),_:1})]),_:1}),n(e(Y),{name:"password",tab:"密码管理"},{default:o(()=>[n(cs)]),_:1}),n(e(Y),{name:"invite",tab:"邀请得福利"},{default:o(()=>[t("div",fn,[n(e(_e),null,{default:o(()=>[n(xs)]),_:1})])]),_:1})]),_:1})],6)]))}});export{bn as default};
